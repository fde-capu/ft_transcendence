<app-menu-bar></app-menu-bar>
<app-invitation-screen></app-invitation-screen>
<h2>Chat Room List</h2>
<table>
<tr *ngFor="let room of visibleRooms">
	<td>
		<span *ngIf="room.isPrivate">PRIVATE </span>
		<span *ngIf="!room.isPrivate">PUBLIC </span>
		<span *ngIf="room.password">PROTECTED</span>
		CHAT:
	</td><td>
		<b>
		{{ room.name }}
		</b>
	</td>
	<td>
		<span *ngIf="!isCurrentUserBlocked(room)">
			<button *ngIf="!room.password" routerLink="/chat/{{room.id}}">ENTER</button>
			<span *ngIf="room.password">
				<button id="btn{{room.id}}" (click)='submitEntrance(room)'>ENTER</button>
				<input id="pass{{room.id}}" [ngModel]="password.get(room.id)" (ngModelChange)="password.set(room.id, $event)"
					(keydown.enter)="fun.blur('pass' + room.id); fun.blink('btn' + room.id); submitEntrance(room);"
					placeholder="<- Type password."
				/>
			</span>
		</span>
		<span *ngIf="isCurrentUserBlocked(room)">&nbsp;<b><- YOU ARE BLOCKED!</b></span>
		<span *ngIf="isCurrentUserMuted(room)">&nbsp;<b><- YOU ARE MUTED!</b></span>
	</td>
</tr>
</table>

<div style='width:100%;text-align:center;margin-top:2em;'>
	<button id="btnprivate" (click)='submitEntranceByAnyPassword()'>ENTER</button>
	<input class='big-input' id="passprivate" [ngModel]="password.get('private')" (ngModelChange)="password.set('private', $event)"
		(keydown.enter)="fun.blur('passprivate'); fun.blink('btnprivate'); submitEntranceByAnyPassword();"
		placeholder="<- Type ANY password."
	/>
</div>
